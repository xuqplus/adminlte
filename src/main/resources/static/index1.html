<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
          name="viewport">

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/admin-lte.min.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/skins.min.css">
    <link rel="stylesheet" href="css/ionicons.min.css">

    <!--HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Google Font -->
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
</head>
<body class="hold-transition skin-blue sidebar-mini">
<div class="wrapper">
    <header class="main-header">
        <a href="#" class="logo">
            <span class="logo-lg"><b>Admin</b>LTE</span>
            <span class="logo-mini"><b>A</b>LTE</span>
        </a>
        <nav class="navbar navbar-static-top">
            <a class="sidebar-toggle" data-toggle="push-menu" role="button">
                <i class="fa fa-bars fa-1x"></i>
            </a>
        </nav>
    </header>

    <aside class="main-sidebar">
        <section class="sidebar">
            <ul class="sidebar-menu" data-widget="tree">
                <li class="treeview sidebar-toggle">
                    <a data-toggle="push-menu" role="button">
                        <i class="fa fa-bars"></i>
                    </a>
                </li>
                <li class="treeview">
                    <a href="#">
                        <i class="fa fa-dashboard"></i><span>工作面板</span>
                        <span class="pull-right-container">
                            <i class="fa fa-angle-left pull-right"></i>
                        </span>
                    </a>
                    <ul class="treeview-menu">
                        <li class="">
                            <a role="button" href="index.html"><i class="fa fa-circle-o"></i> 版本 v1</a>
                        </li>
                        <li class="">
                            <a role="button" href="index.html"><i class="fa fa-circle-o"></i> 版本 v2</a>
                        </li>
                    </ul>
                </li>
                <li class="treeview">
                    <a href="#">
                        <i class="fa fa-files-o"></i>
                        <span>布局建议</span>
                        <span class="pull-right-container">
                             <span class="label label-primary pull-right">4</span>
                        </span>
                    </a>
                    <ul class="treeview-menu">
                        <li><a href="https://adminlte.io/themes/AdminLTE/pages/layout/top-nav.html">
                            <i class="fa fa-circle-o"></i> 顶部导航
                        </a></li>
                        <li><a href="https://adminlte.io/themes/AdminLTE/pages/layout/boxed.html">
                            <i class="fa fa-circle-o"></i> boxed
                        </a></li>
                        <li><a href="https://adminlte.io/themes/AdminLTE/pages/layout/fixed.html">
                            <i class="fa fa-circle-o"></i> fixed
                        </a></li>
                        <li><a href="https://adminlte.io/themes/AdminLTE/pages/layout/collapsed-sidebar.html">
                            <i class="fa fa-circle-o"></i> 收起导航
                        </a></li>
                    </ul>
                </li>
                <li>
                    <a href="https://adminlte.io/themes/AdminLTE/pages/widgets.html">
                        <i class="fa fa-th"></i> <span>Widgets</span>
                        <span class="pull-right-container">
                            <small class="label pull-right bg-green">new</small>
                        </span>
                    </a>
                </li>
                <li class="treeview">
                    <a href="#">
                        <i class="fa fa-pie-chart"></i>
                        <span>图表</span>
                        <span class="pull-right-container">
                            <i class="fa fa-angle-left pull-right"></i>
                        </span>
                    </a>
                    <ul class="treeview-menu">
                        <li><a href="https://adminlte.io/themes/AdminLTE/pages/charts/chartjs.html">
                            <i class="fa fa-circle-o"></i> ChartJS
                        </a></li>
                        <li><a href="https://adminlte.io/themes/AdminLTE/pages/charts/morris.html">
                            <i class="fa fa-circle-o"></i> Morris
                        </a></li>
                        <li><a href="https://adminlte.io/themes/AdminLTE/pages/charts/flot.html">
                            <i class="fa fa-circle-o"></i> Flot
                        </a></li>
                        <li><a href="https://adminlte.io/themes/AdminLTE/pages/charts/inline.html">
                            <i class="fa fa-circle-o"></i> Inline charts
                        </a></li>
                    </ul>
                </li>
                <li class="treeview">
                    <a href="#">
                        <i class="fa fa-laptop"></i>
                        <span>界面元素</span>
                        <span class="pull-right-container">
                            <i class="fa fa-angle-left pull-right"></i>
                        </span>
                    </a>
                    <ul class="treeview-menu">
                        <li><a href="https://adminlte.io/themes/AdminLTE/pages/UI/general.html#">
                            <i class="fa fa-circle-o"></i> 基础元素
                        </a></li>
                        <li><a href="https://adminlte.io/themes/AdminLTE/pages/UI/icons.html">
                            <i class="fa fa-circle-o"></i> 图标
                        </a></li>
                        <li><a href="https://adminlte.io/themes/AdminLTE/pages/UI/buttons.html">
                            <i class="fa fa-circle-o"></i> 按钮
                        </a></li>
                        <li><a href="https://adminlte.io/themes/AdminLTE/pages/UI/sliders.html">
                            <i class="fa fa-circle-o"></i> Sliders
                        </a></li>
                        <li><a href="https://adminlte.io/themes/AdminLTE/pages/UI/timeline.html">
                            <i class="fa fa-circle-o"></i> 时间轴
                        </a></li>
                        <li><a href="https://adminlte.io/themes/AdminLTE/pages/UI/modals.html">
                            <i class="fa fa-circle-o"></i> Modals
                        </a></li>
                    </ul>
                </li>
                <li class="treeview">
                    <a href="#">
                        <i class="fa fa-edit"></i> <span>表单</span>
                        <span class="pull-right-container">
                            <i class="fa fa-angle-left pull-right"></i>
                        </span>
                    </a>
                    <ul class="treeview-menu">
                        <li><a href="https://adminlte.io/themes/AdminLTE/pages/forms/general.html">
                            <i class="fa fa-circle-o"></i> 基础表单
                        </a></li>
                        <li><a href="https://adminlte.io/themes/AdminLTE/pages/forms/advanced.html">
                            <i class="fa fa-circle-o"></i> 进阶表单
                        </a></li>
                        <li><a href="https://adminlte.io/themes/AdminLTE/pages/forms/editors.html">
                            <i class="fa fa-circle-o"></i> 富文本编辑
                        </a></li>
                    </ul>
                </li>
                <li class="treeview">
                    <a href="#">
                        <i class="fa fa-table"></i> <span>+表格+</span>
                        <span class="pull-right-container">
                            <i class="fa fa-angle-left pull-right"></i>
                        </span>
                    </a>
                    <ul class="treeview-menu">
                        <li><a href="page/tables/simple.html">
                            <i class="fa fa-circle-o"></i> 简单表格
                        </a></li>
                        <li><a href="page/tables/data.html">
                            <i class="fa fa-circle-o"></i> 数据表格
                        </a></li>
                    </ul>
                </li>
                <li>
                    <a href="https://adminlte.io/themes/AdminLTE/pages/calendar.html">
                        <i class="fa fa-calendar"></i> <span>+日历+</span>
                        <span class="pull-right-container">
                            <small class="label pull-right bg-red">3</small>
                            <small class="label pull-right bg-blue">17</small>
                        </span>
                    </a>
                </li>
                <li>
                    <a href="https://adminlte.io/themes/AdminLTE/pages/mailbox/mailbox.html">
                        <i class="fa fa-envelope"></i> <span>+邮箱+</span>
                        <span class="pull-right-container">
                            <small class="label pull-right bg-yellow">12</small>
                            <small class="label pull-right bg-green">16</small>
                            <small class="label pull-right bg-red">5</small>
                        </span>
                    </a>
                </li>
                <li class="treeview">
                    <a href="#">
                        <i class="fa fa-folder"></i> <span>+示例+</span>
                        <span class="pull-right-container">
                            <i class="fa fa-angle-left pull-right"></i>
                        </span>
                    </a>
                    <ul class="treeview-menu">
                        <li><a href="page/examples/profile.html">
                            <i class="fa fa-circle-o"></i> 信息
                        </a></li>
                        <li><a href="page/examples/login.html">
                            <i class="fa fa-circle-o"></i> 登录
                        </a></li>
                        <li><a href="page/examples/register.html">
                            <i class="fa fa-circle-o"></i> 注册
                        </a></li>
                        <li><a href="page/examples/lockscreen.html">
                            <i class="fa fa-circle-o"></i> 锁屏
                        </a></li>
                        <li><a href="page/examples/404.html">
                            <i class="fa fa-circle-o"></i> 404 Error
                        </a></li>
                        <li><a href="page/examples/500.html">
                            <i class="fa fa-circle-o"></i> 500 Error
                        </a></li>
                        <li><a href="page/examples/blank.html">
                            <i class="fa fa-circle-o"></i> 空白
                        </a></li>
                    </ul>
                </li>

                <!--级联菜单-->
                <li class="treeview">
                    <a href="#">
                        <i class="fa fa-share"></i> <span>+级联菜单+</span>
                        <span class="pull-right-container">
                            <i class="fa fa-angle-left pull-right"></i>
                        </span>
                    </a>
                    <ul class="treeview-menu">
                        <li><a href=""><i class="fa fa-circle-o"></i> 一级菜单</a></li>
                        <li><a href=""><i class="fa fa-circle-o"></i> 一级菜单</a></li>
                        <li class="treeview">
                            <a href="">
                                <i class="fa fa-circle-o"></i> 一级菜单
                                <i class="fa fa-angle-left pull-right"></i>
                            </a>
                            <ul class="treeview-menu">
                                <li><a href=""><i class="fa fa-circle-o"></i> 二级菜单</a></li>
                                <li><a href=""><i class="fa fa-circle-o"></i> 二级菜单</a></li>
                                <li><a href=""><i class="fa fa-circle-o"></i> 二级菜单</a></li>
                            </ul>
                        </li>
                        <li class="treeview">
                            <a href="">
                                <i class="fa fa-circle-o"></i> 一级菜单
                                <i class="fa fa-angle-left pull-right"></i>
                            </a>
                            <ul class="treeview-menu">
                                <li><a href=""><i class="fa fa-circle-o"></i> 二级菜单</a></li>
                                <li><a href=""><i class="fa fa-circle-o"></i> 二级菜单</a></li>
                                <li><a href=""><i class="fa fa-circle-o"></i> 二级菜单</a></li>
                                <li class="treeview">
                                    <a href="">
                                        <i class="fa fa-circle-o text-red"></i> 二级菜单
                                        <i class="fa fa-angle-left pull-right"></i>
                                    </a>
                                    <ul class="treeview-menu">
                                        <li><a href=""><i class="fa fa-circle-o text-green"></i> 三级菜单</a></li>
                                        <li><a href=""><i class="fa fa-circle-o text-blue"></i> 三级菜单</a></li>
                                        <li><a href=""><i class="fa fa-circle-o text-yellow"></i> 三级菜单</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="https://adminlte.io/docs"><i class="fa fa-book"></i> <span>技术手册</span></a>
                </li>
                <li class="header">LABELS</li>
            </ul>
        </section>
    </aside>


    <div class="content-wrapper">
        <section class="content-header">
            <h1>
                工作面板
                <small>Version 2.0</small>
            </h1>
            <ol class="breadcrumb">
                <li><a href="#"><i class="fa fa-dashboard"></i> 首页</a></li>
                <li class="active">工作面板</li>
            </ol>
        </section>

        <section class="content">
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group col-md-4">
                        <label>省</label>
                        <select id="sheng" class="form-control select2">
                            <option selected="selected">请选择</option>
                        </select>
                    </div>
                    <div class="form-group col-md-4">
                        <label>市</label>
                        <select id="shi" class="form-control select2">
                            <option selected="selected">请选择</option>
                        </select>
                    </div>
                    <div class="form-group col-md-4">
                        <label>县</label>
                        <select id="xian" class="form-control select2">
                            <option selected="selected">请选择</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="row">
                <div id="weather" class="col-md-12">
                </div>
            </div>
        </section>
    </div>

</div>
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/admin-lte.min.js"></script>
<script src="js/skins.js"></script>
<script>
    $.ajax({
        url: '/weather/city?city=china', success: function (res) {
            for (var i in res['china']) {
                var city = res['china'][i];
                $('#sheng').append('<option value="' + city['pyName'] + ':' + city['cityCode'] + '">' + city['quName'] + '</option>');
            }
        }
    });
    $('#sheng').on('change', function () {
        var city = $('#sheng').val().substr(0, $('#sheng').val().indexOf(':'));
        $.ajax({
            url: '/weather/city?city=' + city, success: function (res) {
                $('#shi').html('<option selected="selected">请选择</option>');
                $('#xian').html('<option selected="selected">请选择</option>');
                for (var i in res[city]) {
                    var subCity = res[city][i];
                    $('#shi').append('<option value="' + subCity['pyName'] + ':' + subCity['cityCode'] + '">' + subCity['cityname'] + '</option>');
                }
            }
        });
    });
    $('#shi').on('change', function () {
        var city = $('#shi').val().substr(0, $('#sheng').val().indexOf(':'));
        $.ajax({
            url: '/weather/city?city=' + city, success: function (res) {
                $('#xian').html('<option selected="selected">请选择</option>');
                for (var i in res[city]) {
                    var subCity = res[city][i];
                    $('#xian').append('<option value="' + subCity['pyName'] + ':' + subCity['cityCode'] + '">' + subCity['cityname'] + '</option>');
                }
            }
        });
    });
    $('#shi').on('change', function () {
        var cityCode = $('#shi').val().substr($('#shi').val().indexOf(':') + 1);
        $.ajax({
            url: '/weather/weather?cityCode=' + cityCode, success: function (res) {
                var weatherinfo = res['weatherinfo'];
                var row = '';
                var rowNumber = 0;
                for (var i in weatherinfo) {
                    if (Number(weatherinfo[i]) || '0' == weatherinfo[i]) {
                        var value = '';
                        if (Number(weatherinfo[i]) == 0) {
                            value = '<span class="badge bg-green">' + weatherinfo[i] + '</span>';
                        } else if (Number(weatherinfo[i]) < 0) {
                            value = '<span class="badge bg-red">' + weatherinfo[i] + '</span>';
                        } else if (Number(weatherinfo[i]) < 100) {
                            value = '<span class="badge bg-orange">' + weatherinfo[i] + '</span>';
                        } else {
                            value = '<span class="badge bg-red">' + weatherinfo[i] + '</span>';
                        }
                        row += '<tr>' +
                            '<td>' + rowNumber + '.</td>' +
                            '<td>##' + i + '##</td>' +
                            '<td>' + weatherinfo[i] + '</td>' +
                            '<td>' + value + '</td>' +
                            '</tr>';
                    } else {
                        row += '<tr>' +
                            '<td>' + ++rowNumber + '.</td>' +
                            '<td>##' + i + '##</td>' +
                            '<td>' + weatherinfo[i] + '</td>' +
                            '<td><span class="badge bg-blue">' + weatherinfo[i] + '</span></td>' +
                            '</tr>';
                    }
                }
                row = row.replace('##temp##', '温度');
                row = row.replace('##SD##', '相对湿度');
                row = row.replace('##WS##', '风速');
                row = row.replace('##WSE##', '风速');
                row = row.replace('##WD##', '风向');
                row = row.replace('##njd##', '能见度');
                row = row.replace('##rain##', '降水量');
                row = row.replace('##time##', '更新时间');
                row = row.replace(/##/g, '');
                var html =
                    '<div class="box">' +
                    '                        <div class="box-header with-border">' +
                    '                            <h3 class="box-title">' + weatherinfo['city'] + '天气</h3>' +
                    '                        </div>' +
                    '                        <div class="box-body no-padding">' +
                    '                            <table class="table table-bordered">' +
                    '                                <tr>' +
                    '                                    <th class="col-sm-1">#</th>' +
                    '                                    <th class="col-md-3">项目</th>' +
                    '                                    <th class="col-md-4">数值1</th>' +
                    '                                    <th class="col-md-4">数值2</th>' +
                    '                                </tr>' +
                    row +
                    '                            </table>' +
                    '                        </div>' +
                    '                        <div class="box-footer clearfix">' +
                    '                            <ul class="pagination pagination-sm no-margin pull-right">' +
                    '                                <li><a href=""><i class="fa fa-angle-left"></i> </a></li>' +
                    '                                <li><a href="">1</a></li>' +
                    '                                <li><a href="">2</a></li>' +
                    '                                <li><a href="">3</a></li>' +
                    '                                <li><a href="">4</a></li>' +
                    '                                <li><a href="">5</a></li>' +
                    '                                <li><a href=""><i class="fa fa-angle-right"></i> </a></li>' +
                    '                            </ul>' +
                    '                        </div>' +
                    '                    </div>';
                $('#weather').html(html);
            }
        });
    });
    $('#xian').on('change', function () {
        var cityCode = $('#xian').val().substr($('#xian').val().indexOf(':') + 1);
        $.ajax({
            url: '/weather/weather?cityCode=' + cityCode, success: function (res) {
                var weatherinfo = res['weatherinfo'];
                var row = '';
                var rowNumber = 0;
                for (var i in weatherinfo) {
                    if (Number(weatherinfo[i]) || '0' == weatherinfo[i]) {
                        var value = '';
                        if (Number(weatherinfo[i]) == 0) {
                            value = '<span class="badge bg-green">' + weatherinfo[i] + '</span>';
                        } else if (Number(weatherinfo[i]) < 0) {
                            value = '<span class="badge bg-red">' + weatherinfo[i] + '</span>';
                        } else if (Number(weatherinfo[i]) < 100) {
                            value = '<span class="badge bg-orange">' + weatherinfo[i] + '</span>';
                        } else {
                            value = '<span class="badge bg-red">' + weatherinfo[i] + '</span>';
                        }
                        row += '<tr>' +
                            '<td>' + rowNumber + '.</td>' +
                            '<td>##' + i + '##</td>' +
                            '<td>' + weatherinfo[i] + '</td>' +
                            '<td>' + value + '</td>' +
                            '</tr>';
                    } else {
                        row += '<tr>' +
                            '<td>' + ++rowNumber + '.</td>' +
                            '<td>##' + i + '##</td>' +
                            '<td>' + weatherinfo[i] + '</td>' +
                            '<td><span class="badge bg-blue">' + weatherinfo[i] + '</span></td>' +
                            '</tr>';
                    }
                }
                row = row.replace('##temp##', '温度');
                row = row.replace('##SD##', '相对湿度');
                row = row.replace('##WS##', '风速');
                row = row.replace('##WSE##', '风速');
                row = row.replace('##WD##', '风向');
                row = row.replace('##njd##', '能见度');
                row = row.replace('##rain##', '降水量');
                row = row.replace('##time##', '更新时间');
                row = row.replace(/##/g, '');
                var html =
                    '<div class="box">' +
                    '                        <div class="box-header with-border">' +
                    '                            <h3 class="box-title">' + weatherinfo['city'] + '天气</h3>' +
                    '                        </div>' +
                    '                        <div class="box-body no-padding">' +
                    '                            <table class="table table-bordered">' +
                    '                                <tr>' +
                    '                                    <th class="col-sm-1">#</th>' +
                    '                                    <th class="col-md-3">项目</th>' +
                    '                                    <th class="col-md-4">数值1</th>' +
                    '                                    <th class="col-md-4">数值2</th>' +
                    '                                </tr>' +
                    row +
                    '                            </table>' +
                    '                        </div>' +
                    '                        <div class="box-footer clearfix">' +
                    '                            <ul class="pagination pagination-sm no-margin pull-right">' +
                    '                                <li><a href=""><i class="fa fa-angle-left"></i> </a></li>' +
                    '                                <li><a href="">1</a></li>' +
                    '                                <li><a href="">2</a></li>' +
                    '                                <li><a href="">3</a></li>' +
                    '                                <li><a href="">4</a></li>' +
                    '                                <li><a href="">5</a></li>' +
                    '                                <li><a href=""><i class="fa fa-angle-right"></i> </a></li>' +
                    '                            </ul>' +
                    '                        </div>' +
                    '                    </div>';
                $('#weather').html(html);
            }
        });
    });
</script>
</body>
</html>
